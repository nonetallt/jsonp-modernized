!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jsonp=e():t.jsonp=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=4)}([function(t,e){t.exports=function(t){if("string"!=typeof t)return!1;var e=t.match(r);if(!e)return!1;var i=e[1];if(!i)return!1;if(n.test(i)||o.test(i))return!0;return!1};var r=/^(?:\w+:)?\/\/(\S+)$/,n=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,o=/^[^\s\.]+\.\S{2,}$/},function(t,e,r){"use strict";const n=r(6),o=r(7),i=r(8);function c(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function u(t,e){return e.decode?o(t):t}function a(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function s(t){const e=(t=a(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function l(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function f(t,e){const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return(t,r,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"comma":return(t,e,r)=>{const n="string"==typeof e&&e.split("").indexOf(",")>-1?e.split(","):e;r[t]=n};default:return(t,e,r)=>{void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},e)),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(const o of t.split("&")){let[t,c]=i(e.decode?o.replace(/\+/g," "):o,"=");c=void 0===c?null:u(c,e),r(u(t,e),c,n)}for(const t of Object.keys(n)){const r=n[t];if("object"==typeof r&&null!==r)for(const t of Object.keys(r))r[t]=l(r[t],e);else n[t]=l(r,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((t,e)=>{const r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(r):t[e]=r,t},Object.create(null))}e.extract=s,e.parse=f,e.stringify=(t,e)=>{if(!t)return"";const r=function(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const o=r.length;return void 0===n||t.skipNull&&null===n?r:null===n?[...r,[c(e,t),"[",o,"]"].join("")]:[...r,[c(e,t),"[",c(o,t),"]=",c(n,t)].join("")]};case"bracket":return e=>(r,n)=>void 0===n||t.skipNull&&null===n?r:null===n?[...r,[c(e,t),"[]"].join("")]:[...r,[c(e,t),"[]=",c(n,t)].join("")];case"comma":return e=>(r,n)=>null==n||0===n.length?r:0===r.length?[[c(e,t),"=",c(n,t)].join("")]:[[r,c(n,t)].join(",")];default:return e=>(r,n)=>void 0===n||t.skipNull&&null===n?r:null===n?[...r,c(e,t)]:[...r,[c(e,t),"=",c(n,t)].join("")]}}(e=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},e)),n=Object.assign({},t);if(e.skipNull)for(const t of Object.keys(n))void 0!==n[t]&&null!==n[t]||delete n[t];const o=Object.keys(n);return!1!==e.sort&&o.sort(e.sort),o.map(n=>{const o=t[n];return void 0===o?"":null===o?c(n,e):Array.isArray(o)?o.reduce(r(n),[]).join("&"):c(n,e)+"="+c(o,e)}).filter(t=>t.length>0).join("&")},e.parseUrl=(t,e)=>({url:a(t).split("?")[0]||"",query:f(s(t),e)}),e.stringifyUrl=(t,r)=>{const n=a(t.url).split("?")[0]||"",o=e.extract(t.url),i=e.parse(o),c=function(t){let e="";const r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(t.url),u=Object.assign(i,t.query);let s=e.stringify(u,r);return s&&(s=`?${s}`),`${n}${s}${c}`}},function(t,e,r){"use strict";var n=Function.prototype.toString,o=/^\s*class\b/,i=function(t){try{var e=n.call(t);return o.test(e)}catch(t){return!1}},c=Object.prototype.toString,u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(u)return function(t){try{return!i(t)&&(n.call(t),!0)}catch(t){return!1}}(t);if(i(t))return!1;var e=c.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,r){(function(e){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+n+"|"+o+")"+"?",s="[\\ufe0e\\ufe0f]?"+a+("(?:\\u200d(?:"+[i,c,u].join("|")+")[\\ufe0e\\ufe0f]?"+a+")*"),l="(?:"+[i+n+"?",n,c,u,r].join("|")+")",f=RegExp(o+"(?="+o+")|"+l+s,"g"),p=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),d="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,b=d||y||Function("return this")();function m(t){return p.test(t)}function h(t){return m(t)?function(t){return t.match(f)||[]}(t):function(t){return t.split("")}(t)}var v=Object.prototype.toString,g=b.Symbol,j=g?g.prototype:void 0,w=j?j.toString:void 0;function k(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==v.call(t)}(t))return w?w.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function x(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(t,e,r)}var O,E=(O="toUpperCase",function(t){var e,r=m(t=null==(e=t)?"":k(e))?h(t):void 0,n=r?r[0]:t.charAt(0),o=r?x(r,1).join(""):t.slice(1);return n[O]()+o});t.exports=E}).call(this,r(9))},function(t,e,r){t.exports=r(5)},function(t,e,r){t.exports=r(10)},function(t,e,r){"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)},function(t,e,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],i(r),i(n))}function c(t){try{return decodeURIComponent(t)}catch(o){for(var e=t.match(n),r=1;r<e.length;r++)e=(t=i(e,r).join("")).match(n);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=o.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var n=c(r[0]);n!==r[0]&&(e[r[0]]=n)}r=o.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),u=0;u<i.length;u++){var a=i[u];t=t.replace(new RegExp(a,"g"),e[a])}return t}(t)}}},function(t,e,r){"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";r.r(e);var n=r(0),o=r.n(n),i=r(1),c=r.n(i),u=r(2),a=r.n(u),s=r(3),l=r.n(s);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y={callbackFunction:"__jp[ID]",callbackParameter:"callback",timeout:6e4,parameters:{},encodeParameters:!0},b=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this.attributes={id:Math.random().toString(36).substr(2)},Object.keys(r).forEach((function(t){e.set(t,r[t])}))}var e,r,n;return e=t,(r=[{key:"set",value:function(t,e){if(void 0===y[t])throw new Error("Unknown option ".concat(t));this[t]=e}},{key:"get",value:function(t){var e=this.attributes[t]||y[t]||null;if(null===e)throw new Error("Unknown option ".concat(t));var r="mutate".concat(l()(t));return a()(this[r])&&(e=this[r](e)),e}},{key:"mutateCallbackFunction",value:function(t){return t.replace("[ID]",this.attributes.id)}},{key:"callbackFunction",set:function(t){if("string"!=typeof t)throw new Error("Callback function must be a string of at least 1 character long");this.attributes.callbackFunction=t}},{key:"callbackParameter",set:function(t){if("string"!=typeof t)throw new Error("Callback parameter must be a string of at least 1 character long");this.attributes.callbackParameter=t}},{key:"parameters",set:function(t){if("object"!==f(t))throw new Error("Parameters must be an object");this.attributes.parameters=t}},{key:"timeout",set:function(t){if(!Number.isInteger(t)||t<0)throw new Error("Timeout must be false or integer value of at least 0");0===t&&(t=!1),this.attributes.timeout=t}},{key:"encodeParameters",set:function(t){if("boolean"!=typeof t)throw new Error("Encode parameters must be a boolean");this.attributes.encodeParameters=t}}])&&d(e.prototype,r),n&&d(e,n),t}();function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.completed=!1,this.resolve=e,this.reject=r,this.callbackName=n,this.timer=null}var e,r,n;return e=t,(r=[{key:"startTimeout",value:function(t){var e=this;t&&(this.timer=setTimeout((function(){e.cleanup();var r=t<=1e3?"second":"seconds";e.reject({message:"Request timed out after ".concat(t/1e3," ").concat(r)})}),t))}},{key:"load",value:function(t,e){var r=this;if(this.script=document.createElement("script"),this.script.src=t,this.script.onerror=function(e){r.cleanup(),r.reject({message:"Could not load script from ".concat(t," (network error)"),previous:e})},this.script.onload=function(e){r.completed||(r.cleanup(),r.reject({message:"Failed to execute script from ".concat(t," (wrong mime-type)"),previous:e}))},void 0!==window[this.callbackName])throw new Error("Function '".concat(this.callbackName," is already defined for window, possible request conflict'"));window[this.callbackName]=function(t){r.cleanup(),r.resolve(t)};var n=document.getElementsByTagName("script")[0]||null;null!==n?n.parentNode.insertBefore(this.script,n):document.head.appendChild(this.script),this.startTimeout(e)}},{key:"cleanup",value:function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null),void 0!==window[this.callbackName]&&delete window[this.callbackName],this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.completed=!0}}])&&m(e.prototype,r),n&&m(e,n),t}();function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var j=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setUrl(e),this.setOptions(r)}var e,r,n;return e=t,(r=[{key:"setUrl",value:function(t){if(!o()(t)){var e=v(t);if("string"===e){var r="Given url must be a valid url, '".concat(t,"' given");throw new Error(r)}var n="Given url must be a valid url, ".concat(e," given");throw new Error(n)}this.url=t}},{key:"setOptions",value:function(t){if(t instanceof b)this.options=t;else{if(void 0===t&&(t={}),"object"!==v(t)){var e="undefined"==typeof url?"undefined":v(url),r="Given options must be object or JsonpOptions, ".concat(e," given");throw new Error(r)}this.options=new b(t)}}},{key:"getUrl",value:function(){var t=this.options.get("parameters");t[this.options.get("callbackParameter")]=this.options.get("callbackFunction");var e={url:this.url,query:t},r={encode:this.options.get("encodeParameters")};return c.a.stringifyUrl(e,r)}},{key:"send",value:function(){var t=this;return new Promise((function(e,r){var n=t.options.get("callbackFunction");new h(e,r,n).load(t.getUrl(),t.options.get("timeout"))}))}}])&&g(e.prototype,r),n&&g(e,n),t}();e.default=function(t,e){return new j(t,e).send()}}]).default}));